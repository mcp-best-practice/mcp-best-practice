<!DOCTYPE html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MCP Best Practice"><meta name=author content="Mihai Criveti"><link href=https://pages.github.com/mcp-best-practice/mcp-best-practice/best-practice/mcp-best-practices/ rel=canonical><link href=../../overview/getting-started/ rel=prev><link href=../architecture-security-ops/ rel=next><link rel=alternate type=application/rss+xml title="RSS feed" href=../../feed_rss_created.xml><link rel=alternate type=application/rss+xml title="RSS feed of updated content" href=../../feed_rss_updated.xml><link rel=icon href=../../favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.18"><title>Best Practices Guide - Model Context Protocol - Best Practice</title><link rel=stylesheet href=../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><script src=../../assets/javascripts/glightbox.min.js></script><style id=glightbox-style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#mcp-server-best-practices-overview class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Model Context Protocol - Best Practice" class="md-header__button md-logo" aria-label="Model Context Protocol - Best Practice" data-md-component=logo> <img src=../../logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Model Context Protocol - Best Practice </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Best Practices Guide </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/mcp-best-practice/mcp-best-practice title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class=md-source__repository> mcp-best-practice/mcp-best-practice </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> ğŸ  Home </a> </li> <li class=md-tabs__item> <a href=../../overview/at-a-glance/ class=md-tabs__link> ğŸ§­ Overview </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> â­ Best Practices </a> </li> <li class=md-tabs__item> <a href=../../develop/ class=md-tabs__link> ğŸ’» Develop </a> </li> <li class=md-tabs__item> <a href=../../test/ class=md-tabs__link> ğŸ§ª Test </a> </li> <li class=md-tabs__item> <a href=../../package/ class=md-tabs__link> ğŸ“¦ Package </a> </li> <li class=md-tabs__item> <a href=../../deploy/ class=md-tabs__link> ğŸš€ Deploy </a> </li> <li class=md-tabs__item> <a href=../../operate/ class=md-tabs__link> âš™ï¸ Operate </a> </li> <li class=md-tabs__item> <a href=../../manage/ class=md-tabs__link> ğŸ”§ Manage </a> </li> <li class=md-tabs__item> <a href=../../secure/ class=md-tabs__link> ğŸ›¡ï¸ Secure </a> </li> <li class=md-tabs__item> <a href=../../use/ class=md-tabs__link> ğŸ”Œ Use </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Model Context Protocol - Best Practice" class="md-nav__button md-logo" aria-label="Model Context Protocol - Best Practice" data-md-component=logo> <img src=../../logo.png alt=logo> </a> Model Context Protocol - Best Practice </label> <div class=md-nav__source> <a href=https://github.com/mcp-best-practice/mcp-best-practice title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class=md-source__repository> mcp-best-practice/mcp-best-practice </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> ğŸ  Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../overview/ class="md-nav__link "> <span class=md-ellipsis> ğŸ§­ Overview </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> ğŸ§­ Overview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/at-a-glance/ class=md-nav__link> <span class=md-ellipsis> MCP at a Glance </span> </a> </li> <li class=md-nav__item> <a href=../../overview/server-anatomy/ class=md-nav__link> <span class=md-ellipsis> Server Anatomy </span> </a> </li> <li class=md-nav__item> <a href=../../overview/architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../overview/core-concepts/ class=md-nav__link> <span class=md-ellipsis> Core Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../overview/standards/ class=md-nav__link> <span class=md-ellipsis> Standards </span> </a> </li> <li class=md-nav__item> <a href=../../overview/getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> â­ Best Practices </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> â­ Best Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Best Practices Guide </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Best Practices Guide </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#picking-the-right-sdk class=md-nav__link> <span class=md-ellipsis> Picking the Right SDK </span> </a> <nav class=md-nav aria-label="Picking the Right SDK"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sdk-selection-criteria class=md-nav__link> <span class=md-ellipsis> SDK Selection Criteria </span> </a> </li> <li class=md-nav__item> <a href=#mcp-server-features-and-capabilities class=md-nav__link> <span class=md-ellipsis> MCP Server Features and Capabilities </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tool-and-prompt-description-guidance class=md-nav__link> <span class=md-ellipsis> Tool and Prompt Description Guidance </span> </a> <nav class=md-nav aria-label="Tool and Prompt Description Guidance"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#writing-effective-tool-descriptions class=md-nav__link> <span class=md-ellipsis> Writing Effective Tool Descriptions </span> </a> </li> <li class=md-nav__item> <a href=#managing-state-in-mcp-servers class=md-nav__link> <span class=md-ellipsis> Managing State in MCP Servers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#testing-strategy class=md-nav__link> <span class=md-ellipsis> Testing Strategy </span> </a> <nav class=md-nav aria-label="Testing Strategy"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#evaluation-with-models class=md-nav__link> <span class=md-ellipsis> Evaluation with Models </span> </a> </li> <li class=md-nav__item> <a href=#evaluation-frameworks class=md-nav__link> <span class=md-ellipsis> Evaluation Frameworks </span> </a> </li> <li class=md-nav__item> <a href=#linting-and-static-analysis class=md-nav__link> <span class=md-ellipsis> Linting and Static Analysis </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#curated-catalog class=md-nav__link> <span class=md-ellipsis> Curated Catalog </span> </a> <nav class=md-nav aria-label="Curated Catalog"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-is-a-curated-catalog class=md-nav__link> <span class=md-ellipsis> What is a Curated Catalog? </span> </a> </li> <li class=md-nav__item> <a href=#example-catalog-structure class=md-nav__link> <span class=md-ellipsis> Example Catalog Structure </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tool-filtering-and-guardrails class=md-nav__link> <span class=md-ellipsis> Tool Filtering and Guardrails </span> </a> <nav class=md-nav aria-label="Tool Filtering and Guardrails"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#production-tool-filtering class=md-nav__link> <span class=md-ellipsis> Production Tool Filtering </span> </a> </li> <li class=md-nav__item> <a href=#sequencing-tools-with-guardrails class=md-nav__link> <span class=md-ellipsis> Sequencing Tools with Guardrails </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#model-selection-and-experience class=md-nav__link> <span class=md-ellipsis> Model Selection and Experience </span> </a> <nav class=md-nav aria-label="Model Selection and Experience"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#model-performance-by-task-type class=md-nav__link> <span class=md-ellipsis> Model Performance by Task Type </span> </a> </li> <li class=md-nav__item> <a href=#context-size-considerations class=md-nav__link> <span class=md-ellipsis> Context Size Considerations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#product-support-lifecycle class=md-nav__link> <span class=md-ellipsis> Product Support Lifecycle </span> </a> <nav class=md-nav aria-label="Product Support Lifecycle"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#managing-spec-evolution class=md-nav__link> <span class=md-ellipsis> Managing Spec Evolution </span> </a> </li> <li class=md-nav__item> <a href=#developer-preview-recommendations class=md-nav__link> <span class=md-ellipsis> Developer Preview Recommendations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-mcp-host-application class=md-nav__link> <span class=md-ellipsis> The MCP Host Application </span> </a> <nav class=md-nav aria-label="The MCP Host Application"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#key-security-features-for-client-applications class=md-nav__link> <span class=md-ellipsis> Key Security Features for Client Applications </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#input-and-output-sanitization class=md-nav__link> <span class=md-ellipsis> Input and Output Sanitization </span> </a> </li> <li class=md-nav__item> <a href=#self-containment class=md-nav__link> <span class=md-ellipsis> ğŸ“¦ Self-Containment </span> </a> </li> <li class=md-nav__item> <a href=#makefile-requirements class=md-nav__link> <span class=md-ellipsis> ğŸ›  Makefile Requirements </span> </a> <nav class=md-nav aria-label="ğŸ›  Makefile Requirements"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#required-make-targets class=md-nav__link> <span class=md-ellipsis> âœ… Required Make Targets </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#containerfile class=md-nav__link> <span class=md-ellipsis> ğŸ³ Containerfile </span> </a> <nav class=md-nav aria-label="ğŸ³ Containerfile"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#containerfile-requirements class=md-nav__link> <span class=md-ellipsis> Containerfile Requirements </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dependency-management class=md-nav__link> <span class=md-ellipsis> ğŸ“š Dependency Management </span> </a> </li> <li class=md-nav__item> <a href=#clear-role-definition class=md-nav__link> <span class=md-ellipsis> ğŸ¯ Clear Role Definition </span> </a> </li> <li class=md-nav__item> <a href=#standardized-tools class=md-nav__link> <span class=md-ellipsis> ğŸ§° Standardized Tools </span> </a> </li> <li class=md-nav__item> <a href=#consistent-structure class=md-nav__link> <span class=md-ellipsis> ğŸ“ Consistent Structure </span> </a> </li> <li class=md-nav__item> <a href=#documentation class=md-nav__link> <span class=md-ellipsis> ğŸ“ Documentation </span> </a> </li> <li class=md-nav__item> <a href=#modular-design class=md-nav__link> <span class=md-ellipsis> ğŸ§© Modular Design </span> </a> </li> <li class=md-nav__item> <a href=#testing class=md-nav__link> <span class=md-ellipsis> âœ… Testing </span> </a> </li> <li class=md-nav__item> <a href=#contribution-guidelines class=md-nav__link> <span class=md-ellipsis> ğŸ¤ Contribution Guidelines </span> </a> </li> <li class=md-nav__item> <a href=#versioning-and-releases class=md-nav__link> <span class=md-ellipsis> ğŸ· Versioning and Releases </span> </a> </li> <li class=md-nav__item> <a href=#pull-request-process class=md-nav__link> <span class=md-ellipsis> ğŸ”„ Pull Request Process </span> </a> </li> <li class=md-nav__item> <a href=#environment-variables-and-secrets class=md-nav__link> <span class=md-ellipsis> ğŸ” Environment Variables and Secrets </span> </a> </li> <li class=md-nav__item> <a href=#required-capabilities-readme-metadata-tags class=md-nav__link> <span class=md-ellipsis> ğŸ· Required Capabilities (README Metadata Tags) </span> </a> <nav class=md-nav aria-label="ğŸ· Required Capabilities (README Metadata Tags)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#available-tags class=md-nav__link> <span class=md-ellipsis> Available Tags </span> </a> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#defensive-programming class=md-nav__link> <span class=md-ellipsis> ğŸ›¡ Defensive Programming </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../architecture-security-ops/ class=md-nav__link> <span class=md-ellipsis> Architecture, Security &amp; Operations </span> </a> </li> <li class=md-nav__item> <a href=../when-to-use-mcp/ class=md-nav__link> <span class=md-ellipsis> When to Use MCP </span> </a> </li> <li class=md-nav__item> <a href=../principles/ class=md-nav__link> <span class=md-ellipsis> Design Principles </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../develop/ class="md-nav__link "> <span class=md-ellipsis> ğŸ’» Develop </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> ğŸ’» Develop </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <div class="md-nav__link md-nav__container"> <a href=../../develop/python/ class="md-nav__link "> <span class=md-ellipsis> Python </span> </a> <label class="md-nav__link " for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../develop/python/developing-your-mcp-server-python/ class=md-nav__link> <span class=md-ellipsis> Write an MCP Server in Python </span> </a> </li> <li class=md-nav__item> <a href=../../develop/python/structure/ class=md-nav__link> <span class=md-ellipsis> Project Structure </span> </a> </li> <li class=md-nav__item> <a href=../../develop/python/testing/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=../../develop/python/packaging/ class=md-nav__link> <span class=md-ellipsis> Packaging </span> </a> </li> <li class=md-nav__item> <a href=../../develop/python/best-practices/ class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <div class="md-nav__link md-nav__container"> <a href=../../develop/javascript/ class="md-nav__link "> <span class=md-ellipsis> JavaScript/TypeScript </span> </a> <label class="md-nav__link " for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> JavaScript/TypeScript </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../develop/javascript/typescript/ class=md-nav__link> <span class=md-ellipsis> TypeScript </span> </a> </li> <li class=md-nav__item> <a href=../../develop/javascript/nodejs/ class=md-nav__link> <span class=md-ellipsis> Node.js </span> </a> </li> <li class=md-nav__item> <a href=../../develop/javascript/browser/ class=md-nav__link> <span class=md-ellipsis> Browser </span> </a> </li> <li class=md-nav__item> <a href=../../develop/javascript/testing/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=../../develop/javascript/packaging/ class=md-nav__link> <span class=md-ellipsis> Packaging </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <div class="md-nav__link md-nav__container"> <a href=../../develop/go/ class="md-nav__link "> <span class=md-ellipsis> Go </span> </a> <label class="md-nav__link " for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Go </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../develop/go/structure/ class=md-nav__link> <span class=md-ellipsis> Project Structure </span> </a> </li> <li class=md-nav__item> <a href=../../develop/go/implementation/ class=md-nav__link> <span class=md-ellipsis> Implementation </span> </a> </li> <li class=md-nav__item> <a href=../../develop/go/testing/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=../../develop/go/building/ class=md-nav__link> <span class=md-ellipsis> Building </span> </a> </li> <li class=md-nav__item> <a href=../../develop/go/best-practices/ class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex=0> <span class=md-ellipsis> Rust </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Rust </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../develop/rust/best-practices/ class=md-nav__link> <span class=md-ellipsis> Rust Best Practices for MCP Servers </span> </a> </li> <li class=md-nav__item> <a href=../../develop/rust/building/ class=md-nav__link> <span class=md-ellipsis> Rust Building and Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../develop/rust/implementation/ class=md-nav__link> <span class=md-ellipsis> Rust Implementation Guide </span> </a> </li> <li class=md-nav__item> <a href=../../develop/rust/structure/ class=md-nav__link> <span class=md-ellipsis> Rust Project Structure </span> </a> </li> <li class=md-nav__item> <a href=../../develop/rust/testing/ class=md-nav__link> <span class=md-ellipsis> Rust Testing Guide </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../tutorials class=md-nav__link> <span class=md-ellipsis> Tutorials </span> </a> </li> <li class=md-nav__item> <a href=../../develop/patterns/ class=md-nav__link> <span class=md-ellipsis> Patterns </span> </a> </li> <li class=md-nav__item> <a href=../../develop/tools/ class=md-nav__link> <span class=md-ellipsis> Tools </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../../test/ class="md-nav__link "> <span class=md-ellipsis> ğŸ§ª Test </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> ğŸ§ª Test </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../unit-testing.md class=md-nav__link> <span class=md-ellipsis> Unit Testing </span> </a> </li> <li class=md-nav__item> <a href=../../integration-testing.md class=md-nav__link> <span class=md-ellipsis> Integration Testing </span> </a> </li> <li class=md-nav__item> <a href=../../e2e-testing.md class=md-nav__link> <span class=md-ellipsis> End-to-End Testing </span> </a> </li> <li class=md-nav__item> <a href=../../performance-testing.md class=md-nav__link> <span class=md-ellipsis> Performance Testing </span> </a> </li> <li class=md-nav__item> <a href=../../security-testing.md class=md-nav__link> <span class=md-ellipsis> Security Testing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../../package/ class="md-nav__link "> <span class=md-ellipsis> ğŸ“¦ Package </span> </a> <label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> ğŸ“¦ Package </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../python.md class=md-nav__link> <span class=md-ellipsis> Python Packaging </span> </a> </li> <li class=md-nav__item> <a href=../../npm.md class=md-nav__link> <span class=md-ellipsis> NPM Packaging </span> </a> </li> <li class=md-nav__item> <a href=../../containers.md class=md-nav__link> <span class=md-ellipsis> Container Packaging </span> </a> </li> <li class=md-nav__item> <a href=../../distribution.md class=md-nav__link> <span class=md-ellipsis> Distribution </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <div class="md-nav__link md-nav__container"> <a href=../../deploy/ class="md-nav__link "> <span class=md-ellipsis> ğŸš€ Deploy </span> </a> <label class="md-nav__link " for=__nav_7 id=__nav_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> ğŸš€ Deploy </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cloud.md class=md-nav__link> <span class=md-ellipsis> Cloud Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../on-premise.md class=md-nav__link> <span class=md-ellipsis> On-Premise </span> </a> </li> <li class=md-nav__item> <a href=../../kubernetes.md class=md-nav__link> <span class=md-ellipsis> Kubernetes </span> </a> </li> <li class=md-nav__item> <a href=../../cicd.md class=md-nav__link> <span class=md-ellipsis> CI/CD </span> </a> </li> <li class=md-nav__item> <a href=../../edge.md class=md-nav__link> <span class=md-ellipsis> Edge Deployment </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <div class="md-nav__link md-nav__container"> <a href=../../operate/ class="md-nav__link "> <span class=md-ellipsis> âš™ï¸ Operate </span> </a> <label class="md-nav__link " for=__nav_8 id=__nav_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> âš™ï¸ Operate </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../monitoring.md class=md-nav__link> <span class=md-ellipsis> Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../logging.md class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> <li class=md-nav__item> <a href=../../performance.md class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> <li class=md-nav__item> <a href=../../scaling.md class=md-nav__link> <span class=md-ellipsis> Scaling </span> </a> </li> <li class=md-nav__item> <a href=../../incidents.md class=md-nav__link> <span class=md-ellipsis> Incident Response </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <div class="md-nav__link md-nav__container"> <a href=../../manage/ class="md-nav__link "> <span class=md-ellipsis> ğŸ”§ Manage </span> </a> <label class="md-nav__link " for=__nav_9 id=__nav_9_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> ğŸ”§ Manage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../lifecycle.md class=md-nav__link> <span class=md-ellipsis> Lifecycle Management </span> </a> </li> <li class=md-nav__item> <a href=../../versioning.md class=md-nav__link> <span class=md-ellipsis> Versioning </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring.md class=md-nav__link> <span class=md-ellipsis> Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../updates.md class=md-nav__link> <span class=md-ellipsis> Updates </span> </a> </li> <li class=md-nav__item> <a href=../../rollback.md class=md-nav__link> <span class=md-ellipsis> Rollback </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10> <div class="md-nav__link md-nav__container"> <a href=../../secure/ class="md-nav__link "> <span class=md-ellipsis> ğŸ›¡ï¸ Secure </span> <span class="md-status md-status--draft"></span> </a> <label class="md-nav__link " for=__nav_10 id=__nav_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> ğŸ›¡ï¸ Secure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../authentication.md class=md-nav__link> <span class=md-ellipsis> Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../authorization.md class=md-nav__link> <span class=md-ellipsis> Authorization </span> </a> </li> <li class=md-nav__item> <a href=../../secrets.md class=md-nav__link> <span class=md-ellipsis> Secrets Management </span> </a> </li> <li class=md-nav__item> <a href=../../validation.md class=md-nav__link> <span class=md-ellipsis> Input Validation </span> </a> </li> <li class=md-nav__item> <a href=../../scanning.md class=md-nav__link> <span class=md-ellipsis> Security Scanning </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_11> <div class="md-nav__link md-nav__container"> <a href=../../use/ class="md-nav__link "> <span class=md-ellipsis> ğŸ”Œ Use </span> </a> <label class="md-nav__link " for=__nav_11 id=__nav_11_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_11_label aria-expanded=false> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> ğŸ”Œ Use </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude.md class=md-nav__link> <span class=md-ellipsis> Claude Integration </span> </a> </li> <li class=md-nav__item> <a href=../../gateway.md class=md-nav__link> <span class=md-ellipsis> Gateway Integration </span> </a> </li> <li class=md-nav__item> <a href=../../api-clients.md class=md-nav__link> <span class=md-ellipsis> API Clients </span> </a> </li> <li class=md-nav__item> <a href=../../webhooks.md class=md-nav__link> <span class=md-ellipsis> Webhooks </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/mcp-best-practice/mcp-best-practice/edit/main/docs/docs/best-practice/mcp-best-practices.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.06 9 .94.94L5.92 19H5v-.92zm3.6-6c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"></path></svg> </a> <h1 id=mcp-server-best-practices-overview>MCP Server Best Practices Overview<a class=headerlink href=#mcp-server-best-practices-overview title="Permanent link">Â¶</a></h1> <h2 id=picking-the-right-sdk>Picking the Right SDK<a class=headerlink href=#picking-the-right-sdk title="Permanent link">Â¶</a></h2> <h3 id=sdk-selection-criteria>SDK Selection Criteria<a class=headerlink href=#sdk-selection-criteria title="Permanent link">Â¶</a></h3> <p>Use an official SDK when possible as it is most likely to stay current and specâ€‘compliant. Official SDKs are listed at the <a href=https://modelcontextprotocol.io/docs/sdk>official SDK page</a>. TypeScript and Python SDKs are currently further ahead in development than the others.</p> <p>The official Go SDK (<a href=https://github.com/modelcontextprotocol/go-sdk>modelcontextprotocol/go-sdk</a>) is under heavy development. Meanwhile, <a href=https://github.com/mark3labs/mcp-go>mark3labs/mcp-go</a> is a good alternative choice.</p> <p><a href=https://github.com/jlowin/fastmcp>FastMCP</a> is another well-maintained SDK in Python.</p> <h3 id=mcp-server-features-and-capabilities>MCP Server Features and Capabilities<a class=headerlink href=#mcp-server-features-and-capabilities title="Permanent link">Â¶</a></h3> <p>An MCP server should include the following capabilities. SDK support varies; verify each requirement for your chosen language SDK or implement in your server.</p> <h4 id=read-only-mode-support>Read-Only Mode Support<a class=headerlink href=#read-only-mode-support title="Permanent link">Â¶</a></h4> <p>Ensure that your MCP Server can be deployed with just read-only tools.</p> <p>Provide options to enable write/edit tools but pair them with sufficient authn/authz.</p> <ul> <li><strong>Hosting providers</strong>: Use SDK support for read-only mode restrictions</li> <li><strong>Granular control</strong>: Select SDKs with fine-grained permission controls</li> </ul> <h4 id=staticdynamic-toolset-selection>Static/Dynamic Toolset Selection<a class=headerlink href=#staticdynamic-toolset-selection title="Permanent link">Â¶</a></h4> <p>Effective context management is essential to ensure large language models (LLMs) perform well. Avoid overloading them with too many tools. Design MCP servers so toolsets can be enabled or disabled statically or dynamically.</p> <ul> <li><strong>Runtime configuration</strong>: SDKs that support tool registration at runtime</li> <li><strong>Conditional tools</strong>: Ability to enable/disable tools based on permissions</li> <li><strong>Context-aware tools</strong>: Tools that adapt based on user authentication</li> </ul> <h4 id=authenticationauthorization-support>Authentication/Authorization Support<a class=headerlink href=#authenticationauthorization-support title="Permanent link">Â¶</a></h4> <p>Implement the OAuth 2.0 authorization flows defined in the <a href=https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization>MCP specification</a>.</p> <ul> <li><strong>OAuth 2.0</strong>: Built-in OAuth flow handling</li> <li><strong>API key management</strong>: Secure credential storage and rotation</li> <li><strong>Scope management</strong>: Granular permission scopes per tool</li> <li><strong>Token exchange</strong>: Support for token refresh and exchange patterns</li> </ul> <h2 id=tool-and-prompt-description-guidance>Tool and Prompt Description Guidance<a class=headerlink href=#tool-and-prompt-description-guidance title="Permanent link">Â¶</a></h2> <h3 id=writing-effective-tool-descriptions>Writing Effective Tool Descriptions<a class=headerlink href=#writing-effective-tool-descriptions title="Permanent link">Â¶</a></h3> <p>Follow these principles for tool descriptions:</p> <h4 id=be-specific-and-actionable>Be Specific and Actionable<a class=headerlink href=#be-specific-and-actionable title="Permanent link">Â¶</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1>// âŒ Bad: Vague description</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=p>{</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span><span class=nt>"name"</span><span class=p>:</span><span class=w> </span><span class=s2>"manage_files"</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>  </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Handle files"</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=p>}</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=c1>// âœ… Good: Specific and clear</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=p>{</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=w>  </span><span class=nt>"name"</span><span class=p>:</span><span class=w> </span><span class=s2>"read_text_file"</span><span class=p>,</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=w>  </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Read the contents of a text file from the local filesystem. Returns the file content as plain text. Maximum file size: 10MB."</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=p>}</span>
</span></code></pre></div> <h4 id=include-context-and-constraints>Include Context and Constraints<a class=headerlink href=#include-context-and-constraints title="Permanent link">Â¶</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=p>{</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span><span class=nt>"name"</span><span class=p>:</span><span class=w> </span><span class=s2>"create_github_issue"</span><span class=p>,</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Create a new issue in a GitHub repository. Requires 'issues:write' permission. The issue will be created with the authenticated user as the author."</span><span class=p>,</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>  </span><span class=nt>"inputSchema"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>    </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"object"</span><span class=p>,</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>    </span><span class=nt>"properties"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>      </span><span class=nt>"repository"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>        </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"string"</span><span class=p>,</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>        </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Repository in format 'owner/repo' (e.g., 'microsoft/vscode')"</span><span class=p>,</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>        </span><span class=nt>"pattern"</span><span class=p>:</span><span class=w> </span><span class=s2>"^[a-zA-Z0-9_.-]+/[a-zA-Z0-9_.-]+$"</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>      </span><span class=nt>"title"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>        </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"string"</span><span class=p>,</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=w>        </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Issue title (1-256 characters)"</span><span class=p>,</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=w>        </span><span class=nt>"minLength"</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=w>        </span><span class=nt>"maxLength"</span><span class=p>:</span><span class=w> </span><span class=mi>256</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a><span class=w>      </span><span class=nt>"body"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a><span class=w>        </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"string"</span><span class=p>,</span>
</span><span id=__span-1-20><a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a><span class=w>        </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Issue description in GitHub Markdown format"</span><span class=p>,</span>
</span><span id=__span-1-21><a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a><span class=w>        </span><span class=nt>"maxLength"</span><span class=p>:</span><span class=w> </span><span class=mi>65536</span>
</span><span id=__span-1-22><a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-1-23><a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-1-24><a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-1-25><a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a><span class=p>}</span>
</span></code></pre></div> <h4 id=design-tool-descriptions-to-suggest-next-steps>Design Tool Descriptions to Suggest Next Steps<a class=headerlink href=#design-tool-descriptions-to-suggest-next-steps title="Permanent link">Â¶</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1>// âŒ Bad: Vague description</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=p>{</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=nt>"name"</span><span class=p>:</span><span class=w> </span><span class=s2>"start_pod"</span><span class=p>,</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>  </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Start a Kubernetes pod."</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=p>}</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=c1>// âœ… Good: Specific and clear</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=p>{</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>  </span><span class=nt>"name"</span><span class=p>:</span><span class=w> </span><span class=s2>"pod_start"</span><span class=p>,</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=w>  </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Start a Kubernetes pod. You can run pod_status tool to check if it started successfully."</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=p>}</span>
</span></code></pre></div> <h4 id=reference-existing-documentation>Reference Existing Documentation<a class=headerlink href=#reference-existing-documentation title="Permanent link">Â¶</a></h4> <p>For tool descriptions, refer to:</p> <ul> <li><a href=https://modelcontextprotocol.io/docs>Anthropic's MCP documentation</a></li> <li><a href=https://github.com/anthropics/mcp-examples>Tool design patterns</a></li> <li>Industry-specific API documentation</li> </ul> <h3 id=managing-state-in-mcp-servers>Managing State in MCP Servers<a class=headerlink href=#managing-state-in-mcp-servers title="Permanent link">Â¶</a></h3> <h4 id=stateless-by-default>Stateless by Default<a class=headerlink href=#stateless-by-default title="Permanent link">Â¶</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># âœ… Good: Stateless operation</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=nd>@server</span><span class=o>.</span><span class=n>call_tool</span><span class=p>()</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>get_user_profile</span><span class=p>(</span><span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>arguments</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>    <span class=n>user_id</span> <span class=o>=</span> <span class=n>arguments</span><span class=p>[</span><span class=s2>"user_id"</span><span class=p>]</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>    <span class=c1># Fetch from external system</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>    <span class=n>profile</span> <span class=o>=</span> <span class=k>await</span> <span class=n>api_client</span><span class=o>.</span><span class=n>get_user</span><span class=p>(</span><span class=n>user_id</span><span class=p>)</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>    <span class=k>return</span> <span class=p>[</span><span class=n>TextContent</span><span class=p>(</span><span class=nb>type</span><span class=o>=</span><span class=s2>"text"</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>profile</span><span class=p>))]</span>
</span></code></pre></div> <h4 id=external-state-management>External State Management<a class=headerlink href=#external-state-management title="Permanent link">Â¶</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1># âœ… Good: External state storage</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=k>class</span><span class=w> </span><span class=nc>StatefulMCPServer</span><span class=p>:</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>redis_client</span><span class=p>):</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>        <span class=bp>self</span><span class=o>.</span><span class=n>cache</span> <span class=o>=</span> <span class=n>redis_client</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>    
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>process_with_cache</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>        <span class=c1># Check cache first</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>        <span class=n>cached</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>        <span class=k>if</span> <span class=n>cached</span><span class=p>:</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>            <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>cached</span><span class=p>)</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>        
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>        <span class=c1># Process and cache result</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>        <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>process_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>setex</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=mi>300</span><span class=p>,</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>result</span><span class=p>))</span>  <span class=c1># 5 min TTL</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a>        <span class=k>return</span> <span class=n>result</span>
</span></code></pre></div> <h2 id=testing-strategy>Testing Strategy<a class=headerlink href=#testing-strategy title="Permanent link">Â¶</a></h2> <h3 id=evaluation-with-models>Evaluation with Models<a class=headerlink href=#evaluation-with-models title="Permanent link">Â¶</a></h3> <p>Test your MCP server with both hosted and local models:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># Automated testing with different models</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>test_with_models</span><span class=p>():</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>    <span class=n>models</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>        <span class=p>(</span><span class=s2>"claude-3-sonnet"</span><span class=p>,</span> <span class=s2>"hosted"</span><span class=p>),</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>        <span class=p>(</span><span class=s2>"llama2"</span><span class=p>,</span> <span class=s2>"local"</span><span class=p>),</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>        <span class=p>(</span><span class=s2>"gpt-4"</span><span class=p>,</span> <span class=s2>"hosted"</span><span class=p>)</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>    <span class=p>]</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>    
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>    <span class=k>for</span> <span class=n>model_name</span><span class=p>,</span> <span class=n>deployment</span> <span class=ow>in</span> <span class=n>models</span><span class=p>:</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>        <span class=n>client</span> <span class=o>=</span> <span class=n>get_model_client</span><span class=p>(</span><span class=n>model_name</span><span class=p>,</span> <span class=n>deployment</span><span class=p>)</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>        
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>        <span class=c1># Test tool discovery</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>        <span class=n>tools</span> <span class=o>=</span> <span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>list_tools</span><span class=p>()</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>        <span class=k>assert</span> <span class=nb>len</span><span class=p>(</span><span class=n>tools</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>        
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>        <span class=c1># Test tool execution</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>        <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>call_tool</span><span class=p>(</span><span class=s2>"echo"</span><span class=p>,</span> <span class=p>{</span><span class=s2>"text"</span><span class=p>:</span> <span class=s2>"test"</span><span class=p>})</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>        <span class=k>assert</span> <span class=s2>"test"</span> <span class=ow>in</span> <span class=nb>str</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></code></pre></div> <h3 id=evaluation-frameworks>Evaluation Frameworks<a class=headerlink href=#evaluation-frameworks title="Permanent link">Â¶</a></h3> <p>Use evaluation platforms such as <a href=https://www.mcpevals.io/ >MCP Evals</a> to measure and track the performance of your MCP server and its tools with LLMs over time.</p> <h3 id=linting-and-static-analysis>Linting and Static Analysis<a class=headerlink href=#linting-and-static-analysis title="Permanent link">Â¶</a></h3> <p>Implement comprehensive code quality checks:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1># .github/workflows/quality.yml</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Code Quality</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=nt>on</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>push</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>pull_request</span><span class="p p-Indicator">]</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=nt>jobs</span><span class=p>:</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>  </span><span class=nt>quality</span><span class=p>:</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>    </span><span class=nt>steps</span><span class=p>:</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Static Analysis Security Testing (SAST)</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=w>        </span><span class=no># Python</span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=w>        </span><span class=no>bandit -r src/</span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=w>        </span><span class=no>semgrep --config=auto src/</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=w>        </span>
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a><span class=w>        </span><span class=no># JavaScript</span>
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a><span class=w>        </span><span class=no>npm audit</span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a><span class=w>        </span><span class=no>eslint --ext .js,.ts src/</span>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a><span class=w>        </span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a><span class=w>        </span><span class=no># Go</span>
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a><span class=w>        </span><span class=no>gosec ./...</span>
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a><span class=w>        </span><span class=no>staticcheck ./...</span>
</span></code></pre></div> <h2 id=curated-catalog>Curated Catalog<a class=headerlink href=#curated-catalog title="Permanent link">Â¶</a></h2> <h3 id=what-is-a-curated-catalog>What is a Curated Catalog?<a class=headerlink href=#what-is-a-curated-catalog title="Permanent link">Â¶</a></h3> <p>A curated catalog is a vetted collection of MCP servers approved for organizational use.</p> <h4 id=internal-catalogs>Internal Catalogs<a class=headerlink href=#internal-catalogs title="Permanent link">Â¶</a></h4> <ul> <li><strong>Company-specific</strong>: Internal MCP servers for organizational tools</li> <li><strong>Security reviewed</strong>: All servers undergo security assessment</li> <li><strong>Compliance checked</strong>: Servers meet regulatory requirements</li> <li><strong>Usage tracked</strong>: Monitor adoption and performance</li> </ul> <h4 id=external-catalogs>External Catalogs<a class=headerlink href=#external-catalogs title="Permanent link">Â¶</a></h4> <ul> <li><strong>Public repositories</strong>: Community-maintained MCP server collections</li> <li><strong>Vendor catalogs</strong>: Official servers from service providers</li> <li><strong>Industry-specific</strong>: Specialized servers for specific domains</li> </ul> <h3 id=example-catalog-structure>Example Catalog Structure<a class=headerlink href=#example-catalog-structure title="Permanent link">Â¶</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># catalog.yaml</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=nt>servers</span><span class=p>:</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>  </span><span class=nt>github-mcp</span><span class=p>:</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>"GitHub</span><span class=nv> </span><span class=s>Integration</span><span class=nv> </span><span class=s>Server"</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>    </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=s>"https://github.com/company/github-mcp"</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>    </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>"1.2.0"</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=w>    </span><span class=nt>security_review</span><span class=p>:</span><span class=w> </span><span class=s>"2024-01-15"</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=w>    </span><span class=nt>compliance</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>"SOC2"</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>"GDPR"</span><span class="p p-Indicator">]</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=w>    </span><span class=nt>tags</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>"git"</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>"development"</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>"issues"</span><span class="p p-Indicator">]</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=w>    </span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=w>  </span><span class=nt>database-mcp</span><span class=p>:</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>"Database</span><span class=nv> </span><span class=s>Query</span><span class=nv> </span><span class=s>Server"</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=w>    </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=s>"https://github.com/company/database-mcp"</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=w>    </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>"2.1.0"</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a><span class=w>    </span><span class=nt>security_review</span><span class=p>:</span><span class=w> </span><span class=s>"2024-02-01"</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a><span class=w>    </span><span class=nt>compliance</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>"SOC2"</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>"HIPAA"</span><span class="p p-Indicator">]</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a><span class=w>    </span><span class=nt>tags</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>"database"</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>"sql"</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>"reporting"</span><span class="p p-Indicator">]</span>
</span></code></pre></div> <h2 id=tool-filtering-and-guardrails>Tool Filtering and Guardrails<a class=headerlink href=#tool-filtering-and-guardrails title="Permanent link">Â¶</a></h2> <h3 id=production-tool-filtering>Production Tool Filtering<a class=headerlink href=#production-tool-filtering title="Permanent link">Â¶</a></h3> <p>Never provide agents with tools that can cause irreversible changes in production:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=k>class</span><span class=w> </span><span class=nc>ProductionToolFilter</span><span class=p>:</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>    <span class=n>DANGEROUS_PATTERNS</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>        <span class=s2>"delete_"</span><span class=p>,</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>        <span class=s2>"drop_"</span><span class=p>,</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>        <span class=s2>"truncate_"</span><span class=p>,</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>        <span class=s2>"destroy_"</span><span class=p>,</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>        <span class=s2>"_production"</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>    <span class=p>]</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>    
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>    <span class=k>def</span><span class=w> </span><span class=nf>filter_tools</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tools</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Tool</span><span class=p>],</span> <span class=n>environment</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Tool</span><span class=p>]:</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>        <span class=k>if</span> <span class=n>environment</span> <span class=o>==</span> <span class=s2>"production"</span><span class=p>:</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>            <span class=k>return</span> <span class=p>[</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>                <span class=n>tool</span> <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>tools</span> 
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a>                <span class=k>if</span> <span class=ow>not</span> <span class=nb>any</span><span class=p>(</span><span class=n>pattern</span> <span class=ow>in</span> <span class=n>tool</span><span class=o>.</span><span class=n>name</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> 
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a>                          <span class=k>for</span> <span class=n>pattern</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>DANGEROUS_PATTERNS</span><span class=p>)</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>            <span class=p>]</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a>        <span class=k>return</span> <span class=n>tools</span>
</span></code></pre></div> <h3 id=sequencing-tools-with-guardrails>Sequencing Tools with Guardrails<a class=headerlink href=#sequencing-tools-with-guardrails title="Permanent link">Â¶</a></h3> <p>Implement approval workflows for sensitive operations:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>execute_with_guardrails</span><span class=p>(</span><span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>arguments</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>    <span class=c1># Check if tool requires approval</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>    <span class=k>if</span> <span class=n>tool_name</span> <span class=ow>in</span> <span class=n>REQUIRES_APPROVAL</span><span class=p>:</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>        <span class=n>approval</span> <span class=o>=</span> <span class=k>await</span> <span class=n>request_approval</span><span class=p>(</span><span class=n>tool_name</span><span class=p>,</span> <span class=n>arguments</span><span class=p>)</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>approval</span><span class=o>.</span><span class=n>granted</span><span class=p>:</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>            <span class=k>raise</span> <span class=ne>PermissionError</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Tool execution not approved: </span><span class=si>{</span><span class=n>approval</span><span class=o>.</span><span class=n>reason</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>    
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>    <span class=c1># Execute with monitoring</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>    <span class=k>with</span> <span class=n>execution_monitor</span><span class=p>(</span><span class=n>tool_name</span><span class=p>):</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>        <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>execute_tool</span><span class=p>(</span><span class=n>tool_name</span><span class=p>,</span> <span class=n>arguments</span><span class=p>)</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>    
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a>    <span class=k>return</span> <span class=n>result</span>
</span></code></pre></div> <h2 id=model-selection-and-experience>Model Selection and Experience<a class=headerlink href=#model-selection-and-experience title="Permanent link">Â¶</a></h2> <h3 id=model-performance-by-task-type>Model Performance by Task Type<a class=headerlink href=#model-performance-by-task-type title="Permanent link">Â¶</a></h3> <p>Different models excel at different MCP operations:</p> <table> <thead> <tr> <th>Task Type</th> <th>Best Models</th> <th>Notes</th> </tr> </thead> <tbody> <tr> <td>Code generation</td> <td>Claude-3.5 Sonnet, GPT-4</td> <td>Strong reasoning for complex tools</td> </tr> <tr> <td>Data analysis</td> <td>Claude-3 Sonnet, GPT-4</td> <td>Good at structured data manipulation</td> </tr> <tr> <td>Text processing</td> <td>Claude-3 Haiku, GPT-3.5</td> <td>Fast for simple text operations</td> </tr> <tr> <td>API integration</td> <td>Claude-3.5 Sonnet</td> <td>Excellent at following API specifications</td> </tr> </tbody> </table> <h3 id=context-size-considerations>Context Size Considerations<a class=headerlink href=#context-size-considerations title="Permanent link">Â¶</a></h3> <ul> <li><strong>Large context models</strong>: Better for complex multi-step operations</li> <li><strong>Small context models</strong>: Suitable for simple, focused tasks</li> <li><strong>Context management</strong>: Implement context window optimization</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1># Context optimization</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=k>def</span><span class=w> </span><span class=nf>optimize_context</span><span class=p>(</span><span class=n>messages</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Message</span><span class=p>],</span> <span class=n>max_tokens</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Message</span><span class=p>]:</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>    <span class=k>if</span> <span class=n>total_tokens</span><span class=p>(</span><span class=n>messages</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=n>max_tokens</span><span class=p>:</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>        <span class=k>return</span> <span class=n>messages</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>    
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>    <span class=c1># Keep system message and recent context</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>    <span class=n>system_msg</span> <span class=o>=</span> <span class=n>messages</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>    <span class=n>recent_msgs</span> <span class=o>=</span> <span class=n>messages</span><span class=p>[</span><span class=o>-</span><span class=mi>10</span><span class=p>:]</span>  <span class=c1># Keep last 10 messages</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>    
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>    <span class=k>return</span> <span class=p>[</span><span class=n>system_msg</span><span class=p>]</span> <span class=o>+</span> <span class=n>recent_msgs</span>
</span></code></pre></div> <h2 id=product-support-lifecycle>Product Support Lifecycle<a class=headerlink href=#product-support-lifecycle title="Permanent link">Â¶</a></h2> <h3 id=managing-spec-evolution>Managing Spec Evolution<a class=headerlink href=#managing-spec-evolution title="Permanent link">Â¶</a></h3> <p>The MCP specification evolves rapidly while product lifecycles are long:</p> <h4 id=version-strategy>Version Strategy<a class=headerlink href=#version-strategy title="Permanent link">Â¶</a></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nt>mcp_compatibility</span><span class=p>:</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>  </span><span class=nt>supported_versions</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>"2024-11-05"</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>"2025-06-18"</span><span class="p p-Indicator">]</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>  </span><span class=nt>deprecated_versions</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>"2024-06-01"</span><span class="p p-Indicator">]</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>  </span><span class=nt>migration_timeline</span><span class=p>:</span><span class=w> </span><span class=s>"6</span><span class=nv> </span><span class=s>months"</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>  </span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=nt>product_lifecycle</span><span class=p>:</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>  </span><span class=nt>support_duration</span><span class=p>:</span><span class=w> </span><span class=s>"3</span><span class=nv> </span><span class=s>years"</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>  </span><span class=nt>update_frequency</span><span class=p>:</span><span class=w> </span><span class=s>"quarterly"</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=w>  </span><span class=nt>lts_versions</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>"1.0"</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>"2.0"</span><span class="p p-Indicator">]</span>
</span></code></pre></div> <h4 id=adaptation-strategies>Adaptation Strategies<a class=headerlink href=#adaptation-strategies title="Permanent link">Â¶</a></h4> <ul> <li><strong>Graceful degradation</strong>: Handle unknown protocol features</li> <li><strong>Feature detection</strong>: Test for capability support at runtime</li> <li><strong>Backward compatibility</strong>: Support multiple protocol versions</li> <li><strong>Regular updates</strong>: Plan quarterly compatibility updates</li> </ul> <h3 id=developer-preview-recommendations>Developer Preview Recommendations<a class=headerlink href=#developer-preview-recommendations title="Permanent link">Â¶</a></h3> <p>Given the evolving nature of MCP:</p> <ul> <li><strong>Community support only</strong>: Don't provide enterprise SLA during preview</li> <li><strong>Regular updates required</strong>: Plan for frequent protocol updates</li> <li><strong>Feedback collection</strong>: Actively gather user experience feedback</li> <li><strong>Migration tooling</strong>: Provide tools for spec updates</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1># Feature detection pattern</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>check_server_capabilities</span><span class=p>():</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>        <span class=c1># Try new protocol feature</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>        <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>server</span><span class=o>.</span><span class=n>call</span><span class=p>(</span><span class=s2>"new_method"</span><span class=p>,</span> <span class=p>{})</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>        <span class=k>return</span> <span class=p>{</span><span class=s2>"supports_new_method"</span><span class=p>:</span> <span class=kc>True</span><span class=p>}</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>    <span class=k>except</span> <span class=n>MethodNotFoundError</span><span class=p>:</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>        <span class=c1># Fallback to older approach</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>        <span class=k>return</span> <span class=p>{</span><span class=s2>"supports_new_method"</span><span class=p>:</span> <span class=kc>False</span><span class=p>}</span>
</span></code></pre></div> <h2 id=the-mcp-host-application>The MCP Host Application<a class=headerlink href=#the-mcp-host-application title="Permanent link">Â¶</a></h2> <h3 id=key-security-features-for-client-applications>Key Security Features for Client Applications<a class=headerlink href=#key-security-features-for-client-applications title="Permanent link">Â¶</a></h3> <p>Host applications must implement these security features:</p> <h4 id=tool-description-transparency>Tool Description Transparency<a class=headerlink href=#tool-description-transparency title="Permanent link">Â¶</a></h4> <p>Always show complete tool descriptions to users to prevent rug pulls and shadowing:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1># Show full tool schema before execution</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=k>def</span><span class=w> </span><span class=nf>display_tool_info</span><span class=p>(</span><span class=n>tool</span><span class=p>:</span> <span class=n>Tool</span><span class=p>):</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Tool: </span><span class=si>{</span><span class=n>tool</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Description: </span><span class=si>{</span><span class=n>tool</span><span class=o>.</span><span class=n>description</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Required permissions: </span><span class=si>{</span><span class=n>get_required_permissions</span><span class=p>(</span><span class=n>tool</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Potential side effects: </span><span class=si>{</span><span class=n>analyze_side_effects</span><span class=p>(</span><span class=n>tool</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>    
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>    <span class=c1># Show input schema clearly</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>    <span class=k>for</span> <span class=n>param</span><span class=p>,</span> <span class=n>schema</span> <span class=ow>in</span> <span class=n>tool</span><span class=o>.</span><span class=n>inputSchema</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"properties"</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>        <span class=n>required</span> <span class=o>=</span> <span class=n>param</span> <span class=ow>in</span> <span class=n>tool</span><span class=o>.</span><span class=n>inputSchema</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"required"</span><span class=p>,</span> <span class=p>[])</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"  </span><span class=si>{</span><span class=n>param</span><span class=si>}</span><span class=s2> (</span><span class=si>{</span><span class=s1>'required'</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=n>required</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=s1>'optional'</span><span class=si>}</span><span class=s2>): </span><span class=si>{</span><span class=n>schema</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>'description'</span><span class=p>,</span><span class=w> </span><span class=s1>''</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span></code></pre></div> <h4 id=request-approval-for-tool-use>Request Approval for Tool Use<a class=headerlink href=#request-approval-for-tool-use title="Permanent link">Â¶</a></h4> <p>Implement user approval workflows for sensitive operations:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=k>class</span><span class=w> </span><span class=nc>ToolApprovalSystem</span><span class=p>:</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>        <span class=bp>self</span><span class=o>.</span><span class=n>high_risk_patterns</span> <span class=o>=</span> <span class=p>[</span><span class=s2>"delete"</span><span class=p>,</span> <span class=s2>"drop"</span><span class=p>,</span> <span class=s2>"remove"</span><span class=p>,</span> <span class=s2>"destroy"</span><span class=p>]</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>        <span class=bp>self</span><span class=o>.</span><span class=n>auto_approve_patterns</span> <span class=o>=</span> <span class=p>[</span><span class=s2>"read"</span><span class=p>,</span> <span class=s2>"get"</span><span class=p>,</span> <span class=s2>"list"</span><span class=p>,</span> <span class=s2>"show"</span><span class=p>]</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>    
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>request_approval</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>arguments</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>        <span class=n>risk_level</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>assess_risk</span><span class=p>(</span><span class=n>tool_name</span><span class=p>,</span> <span class=n>arguments</span><span class=p>)</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a>        
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>        <span class=k>if</span> <span class=n>risk_level</span> <span class=o>==</span> <span class=s2>"low"</span><span class=p>:</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a>            <span class=k>return</span> <span class=kc>True</span>  <span class=c1># Auto-approve safe operations</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a>        
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a>        <span class=c1># Show detailed information and request approval</span>
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=se>\n</span><span class=s2>ğŸ”§ Tool Execution Request"</span><span class=p>)</span>
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Tool: </span><span class=si>{</span><span class=n>tool_name</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-14-15><a id=__codelineno-14-15 name=__codelineno-14-15 href=#__codelineno-14-15></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Arguments: </span><span class=si>{</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>arguments</span><span class=p>,</span><span class=w> </span><span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-14-16><a id=__codelineno-14-16 name=__codelineno-14-16 href=#__codelineno-14-16></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Risk Level: </span><span class=si>{</span><span class=n>risk_level</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-14-17><a id=__codelineno-14-17 name=__codelineno-14-17 href=#__codelineno-14-17></a>        
</span><span id=__span-14-18><a id=__codelineno-14-18 name=__codelineno-14-18 href=#__codelineno-14-18></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_user_confirmation</span><span class=p>()</span>
</span><span id=__span-14-19><a id=__codelineno-14-19 name=__codelineno-14-19 href=#__codelineno-14-19></a>    
</span><span id=__span-14-20><a id=__codelineno-14-20 name=__codelineno-14-20 href=#__codelineno-14-20></a>    <span class=k>def</span><span class=w> </span><span class=nf>assess_risk</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>arguments</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-14-21><a id=__codelineno-14-21 name=__codelineno-14-21 href=#__codelineno-14-21></a>        <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=n>pattern</span> <span class=ow>in</span> <span class=n>tool_name</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=k>for</span> <span class=n>pattern</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>high_risk_patterns</span><span class=p>):</span>
</span><span id=__span-14-22><a id=__codelineno-14-22 name=__codelineno-14-22 href=#__codelineno-14-22></a>            <span class=k>return</span> <span class=s2>"high"</span>
</span><span id=__span-14-23><a id=__codelineno-14-23 name=__codelineno-14-23 href=#__codelineno-14-23></a>        
</span><span id=__span-14-24><a id=__codelineno-14-24 name=__codelineno-14-24 href=#__codelineno-14-24></a>        <span class=c1># Check for production environment</span>
</span><span id=__span-14-25><a id=__codelineno-14-25 name=__codelineno-14-25 href=#__codelineno-14-25></a>        <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=s2>"production"</span> <span class=ow>in</span> <span class=nb>str</span><span class=p>(</span><span class=n>v</span><span class=p>)</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>arguments</span><span class=o>.</span><span class=n>values</span><span class=p>()):</span>
</span><span id=__span-14-26><a id=__codelineno-14-26 name=__codelineno-14-26 href=#__codelineno-14-26></a>            <span class=k>return</span> <span class=s2>"high"</span>
</span><span id=__span-14-27><a id=__codelineno-14-27 name=__codelineno-14-27 href=#__codelineno-14-27></a>        
</span><span id=__span-14-28><a id=__codelineno-14-28 name=__codelineno-14-28 href=#__codelineno-14-28></a>        <span class=k>return</span> <span class=s2>"low"</span>
</span></code></pre></div> <h4 id=tool-shadowing-prevention>Tool Shadowing Prevention<a class=headerlink href=#tool-shadowing-prevention title="Permanent link">Â¶</a></h4> <p>Detect and prevent malicious tools that mimic safe operations:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=k>def</span><span class=w> </span><span class=nf>detect_tool_shadowing</span><span class=p>(</span><span class=n>new_tool</span><span class=p>:</span> <span class=n>Tool</span><span class=p>,</span> <span class=n>existing_tools</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Tool</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>    <span class=n>warnings</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a>    
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a>    <span class=k>for</span> <span class=n>existing</span> <span class=ow>in</span> <span class=n>existing_tools</span><span class=p>:</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>        <span class=c1># Check for name similarity</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a>        <span class=n>similarity</span> <span class=o>=</span> <span class=n>calculate_similarity</span><span class=p>(</span><span class=n>new_tool</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=n>existing</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>        <span class=k>if</span> <span class=n>similarity</span> <span class=o>&gt;</span> <span class=mf>0.8</span> <span class=ow>and</span> <span class=n>new_tool</span><span class=o>.</span><span class=n>name</span> <span class=o>!=</span> <span class=n>existing</span><span class=o>.</span><span class=n>name</span><span class=p>:</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>            <span class=n>warnings</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Tool name '</span><span class=si>{</span><span class=n>new_tool</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>' is similar to existing '</span><span class=si>{</span><span class=n>existing</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>'"</span><span class=p>)</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a>        
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a>        <span class=c1># Check for description overlap with different behavior</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a>        <span class=k>if</span> <span class=p>(</span><span class=n>similar_descriptions</span><span class=p>(</span><span class=n>new_tool</span><span class=o>.</span><span class=n>description</span><span class=p>,</span> <span class=n>existing</span><span class=o>.</span><span class=n>description</span><span class=p>)</span> <span class=ow>and</span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a>            <span class=n>different_schemas</span><span class=p>(</span><span class=n>new_tool</span><span class=o>.</span><span class=n>inputSchema</span><span class=p>,</span> <span class=n>existing</span><span class=o>.</span><span class=n>inputSchema</span><span class=p>)):</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a>            <span class=n>warnings</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Tool '</span><span class=si>{</span><span class=n>new_tool</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>' has similar description but different schema than '</span><span class=si>{</span><span class=n>existing</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>'"</span><span class=p>)</span>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a>    
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a>    <span class=k>return</span> <span class=n>warnings</span>
</span></code></pre></div> <h2 id=input-and-output-sanitization>Input and Output Sanitization<a class=headerlink href=#input-and-output-sanitization title="Permanent link">Â¶</a></h2> <p>Ensure your inputs and outputs are sanitized. In Python, we recommend using Pydantic V2.</p> <h2 id=self-containment>ğŸ“¦ Self-Containment<a class=headerlink href=#self-containment title="Permanent link">Â¶</a></h2> <p>Each MCP server must be a <strong>standalone repository</strong> that includes all necessary code and documentation. Example: <code>git clone; make serve</code></p> <h2 id=makefile-requirements>ğŸ›  Makefile Requirements<a class=headerlink href=#makefile-requirements title="Permanent link">Â¶</a></h2> <p>All MCP repositories must include a <code>Makefile</code> with the following standard targets. These targets ensure consistency, enable automation, and support local development and containerization.</p> <h3 id=required-make-targets>âœ… Required Make Targets<a class=headerlink href=#required-make-targets title="Permanent link">Â¶</a></h3> <p>Make targets are grouped by functionality. Use <code>make help</code> to see them all in your terminal.</p> <h4 id=virtual-environment-installation>ğŸŒ± VIRTUAL ENVIRONMENT &amp; INSTALLATION<a class=headerlink href=#virtual-environment-installation title="Permanent link">Â¶</a></h4> <table> <thead> <tr> <th>Target</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>make venv</code></td> <td>Create a new Python virtual environment in <code>~/.venv/&lt;project&gt;</code>.</td> </tr> <tr> <td><code>make activate</code></td> <td>Output the command to activate the virtual environment.</td> </tr> <tr> <td><code>make install</code></td> <td>Install all dependencies using <code>uv</code> from <code>pyproject.toml</code>.</td> </tr> <tr> <td><code>make clean</code></td> <td>Remove virtualenv, Python artifacts, build files, and containers.</td> </tr> </tbody> </table> <h4 id=run-server-testing>â–¶ï¸ RUN SERVER &amp; TESTING<a class=headerlink href=#run-server-testing title="Permanent link">Â¶</a></h4> <table> <thead> <tr> <th>Target</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>make serve</code></td> <td>Run the MCP server locally (e.g., <code>mcp-time-server</code>).</td> </tr> <tr> <td><code>make test</code></td> <td>Run all unit and integration tests with <code>pytest</code>.</td> </tr> <tr> <td><code>make test-curl</code></td> <td>Run public API integration tests using a <code>curl</code> script.</td> </tr> </tbody> </table> <h4 id=documentation-sbom>ğŸ“š DOCUMENTATION &amp; SBOM<a class=headerlink href=#documentation-sbom title="Permanent link">Â¶</a></h4> <table> <thead> <tr> <th>Target</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>make docs</code></td> <td>Generate project documentation and SBOM using <code>handsdown</code>.</td> </tr> <tr> <td><code>make sbom</code></td> <td>Create a software bill of materials (SBOM) and scan dependencies.</td> </tr> </tbody> </table> <h4 id=linting-static-analysis>ğŸ” LINTING &amp; STATIC ANALYSIS<a class=headerlink href=#linting-static-analysis title="Permanent link">Â¶</a></h4> <table> <thead> <tr> <th>Target</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>make lint</code></td> <td>Run all linters (e.g., <code>ruff check</code>, <code>ruff format</code>).</td> </tr> </tbody> </table> <h4 id=container-build-run>ğŸ³ CONTAINER BUILD &amp; RUN<a class=headerlink href=#container-build-run title="Permanent link">Â¶</a></h4> <table> <thead> <tr> <th>Target</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>make podman</code></td> <td>Build a production-ready container image with Podman.</td> </tr> <tr> <td><code>make podman-run</code></td> <td>Run the container locally and expose it on port 8080.</td> </tr> <tr> <td><code>make podman-stop</code></td> <td>Stop and remove the running container.</td> </tr> <tr> <td><code>make podman-test</code></td> <td>Test the container with a <code>curl</code> script.</td> </tr> </tbody> </table> <h4 id=security-package-scanning>ğŸ›¡ï¸ SECURITY &amp; PACKAGE SCANNING<a class=headerlink href=#security-package-scanning title="Permanent link">Â¶</a></h4> <table> <thead> <tr> <th>Target</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>make trivy</code></td> <td>Scan the container image for vulnerabilities using <a href=https://aquasecurity.github.io/trivy/ >Trivy</a>.</td> </tr> </tbody> </table> <blockquote> <p><strong>Tip:</strong> These commands should work out-of-the-box after cloning a repo and running <code>make venv install serve</code>.</p> </blockquote> <h2 id=containerfile>ğŸ³ Containerfile<a class=headerlink href=#containerfile title="Permanent link">Â¶</a></h2> <p>Each repo must include a <code>Containerfile</code> (Podman-compatible, Docker-compatible) to support containerized execution.</p> <h3 id=containerfile-requirements>Containerfile Requirements<a class=headerlink href=#containerfile-requirements title="Permanent link">Â¶</a></h3> <ul> <li>Must start from a secure base (e.g., latest Red Hat UBI9 minimal image <code>registry.access.redhat.com/ubi9-minimal:9.5-1741850109</code>)</li> <li>Should use <code>uv</code> or <code>pdm</code> to install dependencies via <code>pyproject.toml</code></li> <li>Must run the server using the same entry point as <code>make serve</code></li> <li>Should expose relevant ports (<code>EXPOSE 8080</code>)</li> <li>Should define a non-root user for runtime</li> </ul> <h2 id=dependency-management>ğŸ“š Dependency Management<a class=headerlink href=#dependency-management title="Permanent link">Â¶</a></h2> <ul> <li>All Python projects must use <code>pyproject.toml</code> and follow PEP standards.</li> <li>Dependencies must either be:</li> <li>Included in the repo</li> <li>Pulled from PyPI (no external links)</li> </ul> <h2 id=clear-role-definition>ğŸ¯ Clear Role Definition<a class=headerlink href=#clear-role-definition title="Permanent link">Â¶</a></h2> <ul> <li>State the <strong>specific role</strong> of the server (e.g., GitHub tools).</li> <li>Group related tools together.</li> <li><strong>Do not mix roles</strong> (e.g., GitHub â‰  Jira â‰  GitLab).</li> </ul> <h2 id=standardized-tools>ğŸ§° Standardized Tools<a class=headerlink href=#standardized-tools title="Permanent link">Â¶</a></h2> <p>Each MCP server should expose tools that follow the MCP conventions, e.g.:</p> <ul> <li><code>create_ticket</code></li> <li><code>create_pr</code></li> <li><code>read_file</code></li> </ul> <h2 id=consistent-structure>ğŸ“ Consistent Structure<a class=headerlink href=#consistent-structure title="Permanent link">Â¶</a></h2> <p>Repos must follow a common structure. For example, from the time_server</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>time_server/
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>â”œâ”€â”€ Containerfile                  # Container build definition (Podman/Docker compatible)
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>â”œâ”€â”€ Makefile                       # Build, run, test, and container automation targets
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>â”œâ”€â”€ pyproject.toml                 # Python project and dependency configuration (PEP 621)
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>â”œâ”€â”€ README.md                      # Main documentation: overview, setup, usage, env vars
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>â”œâ”€â”€ CONTRIBUTING.md                # Guidelines for contributing, PRs, and issue management
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>â”œâ”€â”€ .gitignore                     # Exclude venvs, artifacts, and secrets from Git
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a>â”œâ”€â”€ docs/                          # (Optional) Diagrams, specs, and additional documentation
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a>â”œâ”€â”€ tests/                         # Unit and integration tests
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>â”‚   â”œâ”€â”€ __init__.py
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a>â”‚   â”œâ”€â”€ test_main.py               # Tests for main entrypoint behavior
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>â”‚   â””â”€â”€ test_tools.py              # Tests for core tool functionality
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a>â””â”€â”€ src/                           # Application source code
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a>    â””â”€â”€ mcp_time_server/           # Main package named after your server
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a>        â”œâ”€â”€ __init__.py            # Marks this directory as a Python package
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a>        â”œâ”€â”€ main.py                # Entrypoint that wires everything together
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a>        â”œâ”€â”€ mcp_server_base.py     # Optional base class for shared server behavior
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a>        â”œâ”€â”€ server.py              # Server logic (e.g., tool registration, lifecycle hooks)
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a>        â””â”€â”€ tools/                 # Directory for all MCP tool implementations
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a>            â”œâ”€â”€ __init__.py
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a>            â”œâ”€â”€ tools.py           # Tool business logic (e.g., `get_time`, `format_time`)
</span><span id=__span-16-22><a id=__codelineno-16-22 name=__codelineno-16-22 href=#__codelineno-16-22></a>            â””â”€â”€ tools_registration.py # Registers tools into the MCP framework
</span></code></pre></div> <h2 id=documentation>ğŸ“ Documentation<a class=headerlink href=#documentation title="Permanent link">Â¶</a></h2> <p>Each repo must include:</p> <ul> <li>A comprehensive <code>README.md</code></li> <li>Setup and usage instructions</li> <li>Environment variable documentation</li> </ul> <h2 id=modular-design>ğŸ§© Modular Design<a class=headerlink href=#modular-design title="Permanent link">Â¶</a></h2> <p>Code should be cleanly separated into modules for easier maintenance and scaling.</p> <h2 id=testing>âœ… Testing<a class=headerlink href=#testing title="Permanent link">Â¶</a></h2> <p>Include <strong>unit and integration tests</strong> to validate functionality.</p> <h2 id=contribution-guidelines>ğŸ¤ Contribution Guidelines<a class=headerlink href=#contribution-guidelines title="Permanent link">Â¶</a></h2> <p>Add a <code>CONTRIBUTING.md</code> with:</p> <ul> <li>How to file issues</li> <li>How to submit pull requests</li> <li>Review and merge process</li> </ul> <h2 id=versioning-and-releases>ğŸ· Versioning and Releases<a class=headerlink href=#versioning-and-releases title="Permanent link">Â¶</a></h2> <p>Use <strong>semantic versioning</strong>. Include <strong>release notes</strong> for all changes.</p> <h2 id=pull-request-process>ğŸ”„ Pull Request Process<a class=headerlink href=#pull-request-process title="Permanent link">Â¶</a></h2> <p>Submit new MCP servers via <strong>pull request</strong> to the org's main repo. PR must:</p> <ul> <li>Follow all standards</li> <li>Include all documentation</li> </ul> <h2 id=environment-variables-and-secrets>ğŸ” Environment Variables and Secrets<a class=headerlink href=#environment-variables-and-secrets title="Permanent link">Â¶</a></h2> <ul> <li>Use environment variables for secrets</li> <li>Use a clear, role-based prefix (e.g., <code>MCP_GITHUB_</code>)</li> </ul> <p><strong>Example:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>MCP_GITHUB_ACCESS_TOKEN=...
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>MCP_GITHUB_BASE_URL=...
</span></code></pre></div> <h2 id=required-capabilities-readme-metadata-tags>ğŸ· Required Capabilities (README Metadata Tags)<a class=headerlink href=#required-capabilities-readme-metadata-tags title="Permanent link">Â¶</a></h2> <p>Add tags at the top of <code>README.md</code> between YAML markers to declare your server's required capabilities.</p> <h3 id=available-tags>Available Tags<a class=headerlink href=#available-tags title="Permanent link">Â¶</a></h3> <ul> <li> <p><strong><code>needs_filesystem_access</code></strong> Indicates the server requires access to the local filesystem (e.g., for reading/writing files).</p> </li> <li> <p><strong><code>needs_api_key_user</code></strong> Requires a user-specific API key to interact with external services on behalf of the user.</p> </li> <li> <p><strong><code>needs_api_key_central</code></strong> Requires a centrally managed API key, typically provisioned and stored by the platform.</p> </li> <li> <p><strong><code>needs_database</code></strong> The server interacts with a persistent database (e.g., PostgreSQL, MongoDB).</p> </li> <li> <p><strong><code>needs_network_access_inbound</code></strong> The server expects to receive inbound network requests (e.g., runs a web server or webhook listener).</p> </li> <li> <p><strong><code>needs_network_access_outbound</code></strong> The server needs to make outbound network requests (e.g., calling external APIs or services).</p> </li> </ul> <h3 id=example>Example<a class=headerlink href=#example title="Permanent link">Â¶</a></h3> <div class="language-markdown highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>---
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>tags:
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>  </span><span class=k>-</span><span class=w> </span>needs_filesystem_access
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=gu>  - needs_api_key_user</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=gu>---</span>
</span></code></pre></div> <h2 id=defensive-programming>ğŸ›¡ Defensive Programming<a class=headerlink href=#defensive-programming title="Permanent link">Â¶</a></h2> <p><strong>MCP Server logic should be developed defensively</strong>, particularly when the MCP server enables write operations and destructive actions. This can be even more important if the MCP Server wraps another API. The Kubernetes API is a good example, as it is common for there to be few guardrails in front of destructive actions.</p> <blockquote> <p><strong>Example</strong>: If you have a Kubernetes API and a controller for managing ingress Gateways, and you want to enable modification or deletion of Gateways (and the controller does not have guardrails, it simply moves towards the declared state) through an MCP Server, you should add defensive logic to your MCP Server (e.g. "check if the Gateway has active routes serving production traffic").</p> </blockquote> <p><strong>Take advantage of feedback mechanisms</strong> (today, <a href=https://modelcontextprotocol.io/specification/2025-06-18/client/elicitation>elicitation</a> is one such mechanism) to increase the safety and reduce accidental destructive actions from agents. In general: Keep in mind when developing MCP Server logic which enables write ops and destructive actions, that the Agents which will utilize them do not possess human judgement.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="September 8, 2025 12:31:22 UTC">September 8, 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Contributors> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.54 5.54 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13zM0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20zm24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9z"></path></svg> </span> <nav> <a href=mailto:crivetimihai@gmail.com>Mihai Criveti</a>, <a href=mailto:mrunalp@gmail.com>Mrunal Patel</a>, <a href=mailto:shaneutt@linux.com>Shane Utt</a> </nav> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Apache 2.0 </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/mcp-best-practice/mcp-best-practice target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.feedback", "content.code.annotate", "content.code.copy", "navigation.indexes", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.share", "search.suggest", "toc.integrate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.92b07e13.min.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>